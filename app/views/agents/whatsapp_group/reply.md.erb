<recent-message-history>
<%- @message
  .previous_messages(limit: 10)
  .reverse_each
  .each_with_index do |message, thread_index| -%>
<% if thread_index > 0 %>


<% end %>
<%= render "agents/whatsapp_group/whatsapp_message", message:, thread_index: -%>
<%- end -%>
</recent-message-history>


<incoming-message>
<%= render "agents/whatsapp_group/whatsapp_message", message: @message -%>
</received-message>


<tool-usage>
use `send_reply` to respond to the incoming message. this sends your
reply to the user who sent the message.

- **send_reply** - takes a `message` parameter (string) containing your
  response. you can mention users by their phone number, i.e. "@14153334444".
</tool-usage>


<command>
read the incoming message and use `send_reply` to respond. use the recent
message history for context if needed, but always reply to the incoming message.
</command>
