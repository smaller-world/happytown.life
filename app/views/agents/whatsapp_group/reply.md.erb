<recent-message-history>
<%- @message
  .previous_messages(limit: 10)
  .reverse_each
  .each_with_index do |message, index| -%>
<% if index > 0 %>


<% end %>
## MESSAGE <%= index + 1 %>:
<%= render "agents/whatsapp_group/whatsapp_message", message:, index: -%>
<%- end -%>
</recent-message-history>


<incoming-message>
<%= render "agents/whatsapp_group/whatsapp_message", message: @message -%>
</received-message>


<tool-usage>
## YOUR TOOLS:
- **send_reply** - takes a `text` parameter (string) containing the text to
  reply with to the incoming message. in your message you can mention users by
  their phone number, i.e. "@14153334444".
- **send_message_history_link** - sends a message to the group containing the
  group's full message history URL.
</tool-usage>


<command>
- read the incoming message and use `send_reply` to respond.
- use the recent message history for context if needed.
</command>
