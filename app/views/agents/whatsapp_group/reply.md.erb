<recent-message-history>
<%- recent_messages_before(@message).each_with_index do |message, index| -%>
<% if index > 0 %>


<% end %>
<%= render "agents/whatsapp_group/whatsapp_message", message:, thread_index: index -%>
<%- end -%>
</recent-message-history>


<incoming-message>
<%= render "agents/whatsapp_group/whatsapp_message", message: @message -%>
</received-message>


<tool-usage>
use `send_reply` to respond to the incoming message. this sends your
reply to the user who sent the message.

- **send_reply** - takes a `message` parameter (string) containing your response
</tool-usage>

<command>
read the incoming message and use `send_reply` to respond. use the recent
message history for context if needed, but always reply to the incoming message.
</command>
